#!/bin/bash

# Define argument seqs
seqs=(
  "2748779069441 1 0 128 1250 1"
  "2748779069441 1 10 128 1250 1"
  "2748779069441 1 20 128 1250 1"
  "2748779069441 1 30 128 1000 1"
  "2748779069441 1 40 128 800 1"
  "2748779069441 2 0 128 1250 1"
  "2748779069441 2 10 128 1250 1"
  "2748779069441 2 20 128 1250 1"
  "2748779069441 2 30 128 1250 1"
  "2748779069441 2 40 128 1250 1"
  "2748779069441 4 0 128 1000 1"
  "2748779069441 4 10 128 1000 1"
  "2748779069441 4 20 128 1000 1"
  "2748779069441 4 30 128 1000 1"
  "2748779069441 4 40 128 1000 1"
  "2748779069441 8 0 128 500 1"
  "2748779069441 8 10 128 500 1"
  "2748779069441 8 20 128 500 1"
  "2748779069441 8 30 128 500 1"
  "2748779069441 8 40 128 500 1"
  "2748779069441 16 0 128 250 1"
  "2748779069441 16 10 128 250 1"
  "2748779069441 16 20 128 250 1"
  "2748779069441 16 30 128 150 1"
  "2748779069441 16 40 128 150 1"
  "2748779069441 2 0 256 500 1"
  "2748779069441 2 10 256 250 1"
  "2748779069441 2 20 256 250 1"
  "2748779069441 2 30 256 250 1"
  "2748779069441 2 40 256 250 1"
  "2748779069441 4 0 256 500 1"
  "2748779069441 4 10 256 500 1"
  "2748779069441 4 20 256 250 1"
  "2748779069441 4 30 256 250 1"
  "2748779069441 4 40 256 250 1"
  "2748779069441 8 0 256 200 1"
  "2748779069441 8 10 256 200 1"
  "2748779069441 8 20 256 200 1"
  "2748779069441 8 30 256 100 1"
  "2748779069441 8 40 256 100 1"
  "2748779069441 16 0 256 10 1"
  "2748779069441 16 10 256 10 1"
  "2748779069441 16 20 256 10 1"
  "2748779069441 16 30 256 10 1"
  "2748779069441 16 40 256 10 1"
  "2748779069441 8 0 512 50 1"
  "2748779069441 8 10 512 10 1"
  "2748779069441 8 20 512 10 1"
  "2748779069441 8 30 512 10 1"
  "2748779069441 8 40 512 10 1"
  "2748779069441 16 0 512 5 1"
  "2748779069441 16 10 512 5 1"
  "2748779069441 16 20 512 5 1"
  "2748779069441 16 30 512 5 1"
  "2748779069441 16 40 512 5 1"
  "2748779069441 32 0 512 3 1"
  "2748779069441 32 10 512 2 1"
  "2748779069441 32 20 512 1 1"
  "2748779069441 32 30 512 1 1"
  "2748779069441 32 40 512 1 1"
  "2748779069441 64 0 512 3 1"
  "2748779069441 64 10 512 3 1"
  "2748779069441 64 20 512 1 1"
  "2748779069441 64 30 512 1 1"
  "2748779069441 64 40 512 1 1"
  "2748779069441 128 0 512 3 1"
  "2748779069441 128 10 512 3 1"
  "2748779069441 128 20 512 3 1"
  "2748779069441 128 30 512 3 1"
  "2748779069441 128 40 512 3 1"
  "2748779069441 8 0 1024 5 1"
  "2748779069441 8 10 1024 1 1"
  "2748779069441 8 20 1024 1 1"
  "2748779069441 8 30 1024 1 1"
  "2748779069441 8 40 1024 1 1"
  "2748779069441 16 0 1024 10 1"
  "2748779069441 16 10 1024 5 1"
  "2748779069441 16 20 1024 2 1"
  "2748779069441 16 30 1024 1 1"
)

# docker run -it arm-pss bash run.sh 2748779069441 64 32 4096 1 0.1

 
# Iterate over pairs and run the command
for seq in "${seqs[@]}"; do
  # Parse N and K
  field_size=$(echo $seq | awk '{print $1}')
  l=$(echo $seq | awk '{print $2}')
  t=$(echo $seq | awk '{print $3}')
  num_parties=$(echo $seq | awk '{print $4}')
  Num_repeats=$(echo $seq | awk '{print $5}')
  sleep_time_ms=$(echo $seq | awk '{print $6}')

  # Generate timestamp
  Timestamp=$(date +%Y%m%d%H%M%S)

  # Run Docker command and redirect output to log file
  log_file=/home/user/output/19/arm-pss-${field_size}-${l}-${t}-${num_parties}-${Num_repeats}-${sleep_time_ms}-${Timestamp}.log
  echo "Running: docker run -it arm-pss bash run.sh ${field_size} ${l} ${t} ${num_parties} ${Num_repeats} ${sleep_time_ms} > $log_file"
  docker run -it arm-pss bash run.sh ${field_size} ${l} ${t} ${num_parties} ${Num_repeats} ${sleep_time_ms} > $log_file

done
